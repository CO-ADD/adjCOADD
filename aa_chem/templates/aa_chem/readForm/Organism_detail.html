<!--prettier-ignore-->
{% extends 'base.html'%}
<!--prettier-ignore-->
{% block title%} mysite{% endblock %}
<!--prettier-ignore-->
{% block content%}
<div class="col-md-8 vh-80 m-auto">


    <p class="m-atuo">

    <div id="{{Organism.Organism_ID}}">
        <a class="btn btn-success btn-sm">Update</a>
    </div>

    <div id="OrganismUpdateModal" class="modal fade " role="dialog">
    </div>

    <script>
        // document.formHasErrors = {% if form.errors %}true{% else %} false{% endif %};

        $(document).ready(function () {
            btn = "#" + "{{Organism.Organism_ID}}"
            let my_modal = $('#OrganismUpdateModal');
            $(`${btn} a`).click(function () {
                my_modal.load("{% url 'organism_update' Organism.Organism_ID %}", function () {
                    my_modal.modal("show");
                });
            });


            if (document.formHasErrors) {
                my_modal.modal('show');
            }


        });

    </script>
    {% if form_error %}
    <script>
        $(document).ready(function () {

            let my_modal = $('#OrganismUpdateModal');
            my_modal.modal("show");
        })
    </script>
    {% endif %}


    </p>
    <p><a href="{% url 'organism_delete' Organism.Organism_ID %}">Delete</a></p>
    <div class="card">
        <b>
            {%include 'utils/message.html'%}
        </b>
        <div class="card-header">
            Organism Taxonomy {{Organism.Organism_Name}}
        </div>
        <div class="row">
            <div class="col-md-5">

                <table class="table">

                    <thead>
                        <tr>
                            <th scope="col">Organism Name</th>
                            <th scope="col">{{Organism.Organism_Name}}</th>

                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row"> Organism Class</th>
                            <td> {{Organism.Organism_Name.Class.Dict_Value}}
                            </td>

                        </tr>
                        <tr>
                            <th scope="row">Organism Desc</th>
                            <td>{{Organism.Organism_Desc}}</td>

                        </tr>
                        <tr>
                            <th scope="row">Risk Group</th>
                            <td class="editablechoices" data-id="{{Organism.pk}}" data-type="Risk_Group">
                                {{Organism.Risk_Group}}

                                <select class="results-select" aria-label="select example " name="Risk_Group"
                                    id="Risk_Group">
                                    {% for obj in Risk_Group_choice %}
                                    <option value="{{obj.Dict_Value}}">{{obj}}</option>
                                    {%endfor%}
                                </select>

                            </td>

                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-md-5">

                <table class="table">

                    <thead>Editable Table Choice Select
                        <tr>
                            <th scope="col">Strain ID</th>
                            <th scope="col">{{Organism.Strain_ID}}</th>

                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row"> Strain_Type</th>
                            <td class="editablechoices" data-id="{{Organism.pk}}" data-type="Strain_Type">
                                {{Organism.Strain_Type}}

                                <select id="results-box" class="results-select" multiple
                                    aria-label="multiple select example " name="Strain_Type" id="straintype">
                                    {% for obj in Strain_Type_options %}
                                    <option value="{{obj.Dict_Value}}">{{obj}}</option>
                                    {%endfor%}
                                </select>

                            </td>

                        </tr>
                        <tr>
                            <th scope="row">Strain Code</th>
                            <td>{{Organism.Strain_Code}}</td>

                        </tr>
                        <tr>
                            <th scope="row">Strain Desc</th>
                            <td colspan="2">{{Organism.Strain_Desc}}</td>

                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div>
            Editable Table Text Input
            <table class="table">

                <thead>
                    <tr>
                        <th scope="col">MTA_status</th>
                        <th scope="col">MTA_document</th>

                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="editable" data-id="{{Organism.pk}}" data-type="MTA_status">{{Organism.MTA_Status}}
                        </td>
                        <td class="editable" data-id="{{Organism.pk}}" data-type="MTA_document">
                            {{Organism.MTA_Document}}</td>

                    </tr>

                </tbody>
            </table>
            {% load static %}
            <script type="text/javascript" src="{% static 'js/jquery-3.6.1.min.js' %}"></script>
            <script src="{% static 'js/editableTable.js' %}" type="text/javascript"></script>

        </div>



        {% load static %}
        <script src="{% static 'js/js_utils/getCookie.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/js_utils/ajax_update.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/editableTablechoices.js' %}" type="text/javascript"></script>



    </div>

</div>

{%endblock%}