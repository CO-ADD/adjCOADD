{% extends "base.html" %}
{% block content %}
<div class="d-flex flex-row bg-light justify-content-between vh-100">
  {%include "utils/sidebar.html"%}
  <div class="main d-flex flex-column">
    <div class="d-flex flex-wrap justify-content-between">
      <a href="{%url 'importOrg'%}" class="btn btn-outline-secondary"><i class="bi bi-cloud-arrow-up"></i>import
        organism</a>
      <div>

        <a href="{%url 'org_list'%}" class="btn btn-outline-secondary"><i class="bi bi-list"></i></a>
        <a href="{%url 'org_card'%}" class="btn btn-outline-secondary">
          <i class="bi bi-grid-fill"></i>

        </a>
      </div>
    </div>
    <hr>

    <div id="createOrganism">

      <a class="btn m-auto" style="float:right;">Create New Organism
        <i class="fa fa-plus"></i>
      </a>
    </div>

    <div id="createOrganismModal" class="modal fade" role="dialog">
    </div>
    <script>

      $(document).ready(function () {

        let my_modal = $("#createOrganismModal");

        $("#createOrganism a").click(function () {
          my_modal.load("{%url 'org_create'%}", function (response) {
            if (response == "Permission Not Granted") {
              alert("permission!")

            } else {
              my_modal.modal("show"); // Open Modal
            }

          });
        });
      });

    </script>


    <h2>Organism Card View</h2>
    <div class="contain-fluid">
      <div class="row d-flex flex-wrap ">
        {% for object in object_list%}
        <!-- object_list -->
        <div class="col-md-4 vh-80 border border-2 m-5">
          <!-- <div class="card bg-transparent my-2 flex-row"> -->

          <p class="i bi-tag fw-bold lead fs-5 m-auto"><a class="m-auto"
              href="{%url 'org_detail' object.pk %}">{{object.organism_name}} <br><span class="fw-light fs-6">
                (ID:
                {{object.organism_id}} )</span>
            </a>
          </p>

          <p class="fw-lighter fs-6 m-auto"><a class="m-auto" href="{% url 'organism_delete' object.pk %}">Delete</a>
          </p>
          <ul class="fw-lighter fs-6 m-auto">
            <li>Created by: {{object.acreated_by}}</li>
            <li>Created at:{{object.acreated_at}}</li>
            {%if object.aupdated_by%}
            <li>Updated at: {{object.aupdated_by}}</li>
            <li>Updated at: {{object.aupdated_at}}</li>
            {%endif%}
          </ul>
          <p>
          <div class="text-center" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{object.pk}}"
            aria-expanded="false" aria-controls="{{object.pk}}">
            <i class="bi bi-chevron-bar-down"></i><i class="bi bi-chevron-bar-up"></i>
          </div>

          </p>
          <div class="collapse" id="collapse{{object.pk}}">

            <div class="card-body d-flex flex-column align-items-start">


              <!--prettier-ignore-->

            </div>
          </div>
          <!-- </div> -->

          <!-- ------------------------------------------------------------------------------------------------------- -->

          <!-- ------------------------------------------------------------------------------------------------------------------------------- -->
        </div>
        {%endfor%}

      </div>
      <hr />
      {% include 'utils/pagination.html'%}
    </div>
    {% load static %}
    <script type="text/javascript" src="{% static 'js/jquery-3.6.1.min.js' %}"></script>
    <!-- <script>
      $(document).ready(() => {
        console.log("loading document")
        $('a.switch').click(function () {
          var url = this.href + '?' + window.location.href.split('?')[1];
          window.location.href = url;
          return false;
        });
      })

    </script> -->

    {%endblock%}