{% extends "base.html" %}
{% block content %}
<div class="d-flex flex-row bg-light justify-content-between vh-100">
    {%include "utils/sidebar.html"%}
    <div class="main d-flex flex-column">
        <div class="d-flex flex-wrap justify-content-between">
            <a href="{%url 'importOrg'%}" class="btn btn-outline-secondary"><i class="bi bi-cloud-arrow-up"></i>import
                organism</a>
            <div>

                <a href="{%url 'org_list'%}" class="btn btn-outline-secondary"><i class="bi bi-list"></i></a>
                <a href="{%url 'org_card'%}" class="btn btn-outline-secondary"><i class="bi bi-grid-fill"></i></a>
            </div>
        </div>
        <hr>

        <div id="createOrganism">

            <a class="btn m-auto" style="float:right;">Create New Organism
                <i class="bi bi-plus"></i>
            </a>
        </div>

        <div id="createOrganismModal" class="modal fade" role="dialog" data-bs-backdrop="static">
        </div>
        <script>

            $(document).ready(function () {

                let my_modal = $("#createOrganismModal");

                $("#createOrganism a").click(function () {
                    my_modal.load("{%url 'org_create'%}", function (response) {
                        if (response == "Permission Not Granted") {
                            alert("permission!")

                        } else {
                            my_modal.modal("show"); // Open Modal
                        }

                    });
                });
            });

        </script>


        <!-- -----------------------------------------View Switch-------------------------------------------------------------------- -->

        {% include 'utils/pagination.html'%}

        <!-- object_list -->
        {%include 'utils/datatable_org.html'%}


    </div>

</div>

</div>

<script>
    $(document).ready(() => {
        console.log("loading document")
        $('a.switch').click(function () {
            var url = this.href + '?' + window.location.href.split('?')[1];
            window.location.href = url;
            return false;
        });


    })
</script>

{% endblock %}