<div class="modal-dialog modal-lg">
<div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title">{{title}}</h5>
     
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
        onclick="window.location.reload(true);"></button>
      
    </div>
    <div class="modal-body">
<p>Step {{ wizard.steps.step1 }} of {{ wizard.steps.count }}</p>
<form id="add_image_organism" action="" enctype="multipart/form-data" method="post">
    {% csrf_token %}
<table>
{{ wizard.management_form }}
{% if wizard.form.forms %}
    {{ wizard.form.management_form }}
    {% for form in wizard.form.forms %}
        {{ form.as_table }}
    {% endfor %}
{% else %}
    {{ wizard.form }}
{% endif %}
</table>
{% if wizard.steps.prev %}
<button name="wizard_goto_step" type="submit" value="{{ wizard.steps.first }}"></button>
<button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}"></button>
{% endif %}
<input type="submit" value="submit"/>
</form>

</div>
</div>
</div>
{%load static%}
<script src="{%static 'js/jquery-3.6.1.min.js'%}"></script>
<script>
    $("#add_image_organism").on("submit", function(e) {
    e.preventDefault();  // Prevent the form from submitting normally
    var formData = new FormData(this);

    $.ajax({
        url: "{% url 'addimg' object.pk %}",  // The URL to submit the form to
        type: 'POST',
        data: formData,
        headers: { "X-CSRFToken": '{{ csrf_token }}' },
        success: function(data) {
            // The server responded with success
            // Replace the modal content with the new form
            $("#add_image_modal").html(data);
        },
        error: function() {
            // Something went wrong
            alert("An error occurred.");
        },
        cache: false,
        contentType: false,
        processData: false
    });
});
</script>